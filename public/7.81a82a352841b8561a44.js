(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Yj9t:function(r,e,t){"use strict";t.r(e),t.d(e,"AuthModule",function(){return L});var o=t("qFsG"),i=t("kmnG"),n=t("3Pt+"),s=t("Wp6s"),a=t("tyNb"),c=t("ofXK"),m=t("SxV6"),u=t("lJxs"),b=t("fXoL"),l=t("qfBg"),d=t("dNgK"),g=t("bTqV");function p(r,e){1&r&&(b.Qb(0,"mat-error"),b.pc(1," Name is required! "),b.Pb())}function h(r,e){1&r&&(b.Qb(0,"mat-error"),b.pc(1," The password is required "),b.Pb())}function f(r,e){if(1&r){const r=b.Rb();b.Qb(0,"form",6),b.Xb("ngSubmit",function(){return b.ic(r),b.Zb().submit()}),b.Qb(1,"mat-form-field",7),b.Mb(2,"input",8),b.oc(3,p,2,0,"mat-error",9),b.Pb(),b.Qb(4,"mat-form-field",7),b.Mb(5,"input",10),b.oc(6,h,2,0,"mat-error",9),b.Pb(),b.Pb()}if(2&r){const r=b.Zb();b.ec("formGroup",r.loginForm),b.Bb(3),b.ec("ngIf",r.loginForm.controls.username.hasError("required")),b.Bb(3),b.ec("ngIf",r.loginForm.controls.password.hasError("required"))}}function w(r,e){1&r&&(b.Qb(0,"mat-error"),b.pc(1," Has to be an email! "),b.Pb())}function v(r,e){1&r&&(b.Qb(0,"mat-error"),b.pc(1," Name is required! "),b.Pb())}function P(r,e){1&r&&(b.Qb(0,"mat-error"),b.pc(1," Password is required! "),b.Pb())}function F(r,e){1&r&&(b.Qb(0,"mat-error"),b.pc(1," Password again has to match to the password! "),b.Pb())}function k(r,e){if(1&r){const r=b.Rb();b.Qb(0,"form",6),b.Xb("ngSubmit",function(){return b.ic(r),b.Zb().submit()}),b.Qb(1,"mat-form-field",7),b.Mb(2,"input",11),b.oc(3,w,2,0,"mat-error",9),b.Pb(),b.Qb(4,"mat-form-field",7),b.Mb(5,"input",12),b.oc(6,v,2,0,"mat-error",9),b.Pb(),b.Qb(7,"mat-form-field",7),b.Mb(8,"input",10),b.oc(9,P,2,0,"mat-error",9),b.Pb(),b.Qb(10,"mat-form-field",7),b.Mb(11,"input",13),b.oc(12,F,2,0,"mat-error",9),b.Pb(),b.Pb()}if(2&r){const r=b.Zb();b.ec("formGroup",r.registrationForm),b.Bb(3),b.ec("ngIf",r.registrationForm.controls.email.hasError("required")||r.registrationForm.controls.email.hasError("email")),b.Bb(3),b.ec("ngIf",r.registrationForm.controls.name.hasError("required")),b.Bb(3),b.ec("ngIf",r.registrationForm.controls.password.hasError("required")),b.Bb(3),b.ec("ngIf",r.registrationForm.controls.passwordAgain.hasError("incorrect"))}}const A=[{path:"",component:(()=>{class r{constructor(r,e,t){this.userService=r,this.snackBar=e,this.router=t,this.isLoginActive=!0}ngOnInit(){this.resetLoginForm()}resetLoginForm(){this.loginForm=new n.d({username:new n.b("",n.l.required),password:new n.b("",n.l.required)})}resetRegistrationForm(){this.registrationForm=new n.d({email:new n.b("",[n.l.email,n.l.required]),name:new n.b("",n.l.required),password:new n.b("",n.l.required),passwordAgain:new n.b("")})}setIsLoginActive(){this.isLoginActive?this.resetRegistrationForm():this.resetLoginForm(),this.isLoginActive=!this.isLoginActive}submit(){this.isLoginActive?this.loginUserWithEmailAndPassword():this.registrationForm.value.password===this.registrationForm.value.passwordAgain?this.createUser({email:this.registrationForm.value.email,username:this.registrationForm.value.name,password:this.registrationForm.value.password}):this.registrationForm.controls.passwordAgain.setErrors({incorrect:!0})}createUser(r){this.userService.create(r).pipe(Object(m.a)()).subscribe(r=>{this.snackBar.open("Sikeres regisztr\xe1ci\xf3!",null,{duration:2e3}),setTimeout(()=>this.setIsLoginActive(),1e3)},r=>{console.error(r),this.snackBar.open("Regisztr\xe1ci\xf3 sikertelen",null,{duration:2e3})})}loginUserWithEmailAndPassword(){this.userService.login({username:this.loginForm.value.username,password:this.loginForm.value.password}).pipe(Object(m.a)()).subscribe(r=>{localStorage.setItem("user",this.loginForm.value.username),this.getStatus()},()=>{this.snackBar.open("Wrong credentials",null,{duration:2e3})})}getStatus(){this.userService.status().pipe(Object(m.a)(),Object(u.a)(r=>r.body)).subscribe(r=>{localStorage.setItem("role",JSON.parse(r).user.accessLevel),this.router.navigate(["/products"])})}}return r.\u0275fac=function(e){return new(e||r)(b.Lb(l.a),b.Lb(d.a),b.Lb(a.a))},r.\u0275cmp=b.Fb({type:r,selectors:[["app-auth"]],decls:16,vars:6,consts:[[1,"background"],[1,"card"],[3,"formGroup","ngSubmit",4,"ngIf"],["mat-stroked-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"link-lookalike",3,"click"],[3,"formGroup","ngSubmit"],[1,"full-width"],["matInput","","placeholder","Username","formControlName","username"],[4,"ngIf"],["matInput","","placeholder","Password","type","password","autocomplete","true","formControlName","password"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Password Again","type","password","autocomplete","true","formControlName","passwordAgain"]],template:function(r,e){1&r&&(b.Qb(0,"div",0),b.Qb(1,"mat-card",1),b.Qb(2,"mat-card-header"),b.Qb(3,"mat-card-subtitle"),b.pc(4),b.Pb(),b.Pb(),b.oc(5,f,7,3,"form",2),b.oc(6,k,13,5,"form",2),b.Qb(7,"mat-card-actions"),b.Qb(8,"button",3),b.Xb("click",function(){return e.isLoginActive?e.resetLoginForm():e.resetRegistrationForm()}),b.pc(9,"Cancel"),b.Pb(),b.Qb(10,"button",4),b.Xb("click",function(){return e.submit()}),b.pc(11,"Submit"),b.Pb(),b.Pb(),b.Qb(12,"p"),b.pc(13),b.Qb(14,"span",5),b.Xb("click",function(){return e.setIsLoginActive()}),b.pc(15),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&r&&(b.Bb(4),b.rc("Welcome on chat-app! You can ",e.isLoginActive?"log in":"sign in"," here!"),b.Bb(1),b.ec("ngIf",e.isLoginActive&&e.loginForm),b.Bb(1),b.ec("ngIf",!e.isLoginActive&&e.registrationForm),b.Bb(4),b.ec("disabled",e.isLoginActive?e.loginForm.invalid:e.registrationForm.invalid),b.Bb(3),b.rc("",e.isLoginActive?"You don't have an account?":"Are you have an account?"," "),b.Bb(2),b.rc("",e.isLoginActive?"Sign in":"Log in"," here!"))},directives:[s.a,s.d,s.f,c.j,s.b,g.a,n.m,n.i,n.e,i.c,o.a,n.a,n.h,n.c,i.b],styles:[".card[_ngcontent-%COMP%]{width:300px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.background[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#303030;position:relative}p[_ngcontent-%COMP%]{text-align:center}.link-lookalike[_ngcontent-%COMP%]{color:#de7a22;cursor:pointer}"]}),r})()}];let L=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.Jb({type:r}),r.\u0275inj=b.Ib({imports:[[c.c,s.e,n.k,i.e,o.b,d.b,g.b,a.c.forChild(A)]]}),r})()}}]);